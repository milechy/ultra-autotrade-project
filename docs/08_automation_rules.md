# 08_automation_rules.md  
Ultra AutoTrade – 自動化ルール（アラート閾値追加）

---

# 1. 死活監視（1分ごと）
```
応答時間 > 10秒 → 警告  
応答時間 > 30秒 → アラート  
```

---

# 2. 過剰取引監視

（既存のルールに加えて）

- Aave へのトレード間隔ルール：
  - 同一ウォレットからの `/aave/rebalance` 実行は **10分に1回まで**
  - 直近トレードから 10分未満のリクエストは
    - サービス層で `NOOP (status=skipped)` として処理
    - ログに「cooldown によりスキップ」と明示的に残す

これにより「AIが暴走して BUY を連打する」ケースでも、  
Aave 側のポジション増加ペースを機械的に抑制する。

---

# 3. Aave運用監視
```
ヘルスファクター < 1.8 → 警告  
ヘルスファクター < 1.6 → 緊急停止  
資産変動 > 20%/日 → アラート  
```

---

# 4. 自動バックアップ
- 毎日0時に Notion→AI→取引履歴をバックアップ  

---

# 5. 緊急時のAIレポート
- 異常検知時、AIが状況説明レポートを生成  
